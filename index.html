<!DOCTYPE html>
<html area="sea" device="pc" mi18n-lang="zh-tw" sea-lang="false"
  style="font-size: 58.7037px; height: 100%; overflow: hidden;">

<head>
  <title>åŸç¥å›æ­¸æ™‚é–“è¨ˆç®—</title>
  <link rel="manifest" href="manifest.json">
  <link id="icon" rel="shortcut icon" href="https://genshin.hoyoverse.com/favicon.ico">
  <link rel="stylesheet" href="https://act.hoyoverse.com/ys/event/e20240817preview-6y2ic4/styles_0cc66622cef17e1ec56a.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css"/>
  <style>
    @font-face {
    font-family: hywh; src:
      url("https://act.hoyoverse.com/ys/event/survey-collection/fonts/default.4b9a2491.ttf"),
      url("https://act-webstatic.hoyoverse.com/font_generate/m20240807hy39n72fwg_hk4e_global_zh-tw_f98br3.woff2"),
      url("https://act-webstatic.hoyoverse.com/font_generate/m20240807hy39n72fwg_hk4e_global_zh-tw_f98br3.woff");
    }

    @media (prefers-color-scheme: dark) {
      html, body {
        background-color: #0c0f1d;
        color: white;
      }
    }

    @media only screen and (orientation: portrait) {
      body {
        transform: rotate(90deg);
        transform-origin: bottom left;
        width: 100vh;
        height: 80vw;
        overflow-x: hidden;
        position: fixed;
        bottom: 100%;
      }
    }
  </style>
</head>

<body onload="startTime()">
  <div id="whole" class="src-components-hippo-modals-Reward-__index_---container---zjR_sr">
    <div class="src-components-hippo-modals-Reward-__index_---ys-preview-switch_f4ot7---ggW1uf">
      <form id="formModal" class="src-components-hippo-modals-Reward-__index_---h_941632148---bSTMA9 self-font">
        <div id="quitInfoBlock" class="src-components-hippo-modals-Reward-__index_---h_94163605---q029wX" style="display:block;z-index:1;user-select:text;">
          è§¸ç™¼æ¢ä»¶ï¼šå†’éšªç­‰éš10ç´šä»¥ä¸Šã€14å¤©ä»¥ä¸Šæœªç™»å…¥éŠæˆ²ä¸”45å¤©ä»¥ä¸Šæœªè§¸ç™¼ã€Œæ˜Ÿä¹‹æ­¸é‚„ã€</div>
        <div id="copyedBlock" class="src-components-hippo-modals-Reward-__index_---h_941631471---Fwl8Ur" style="user-select:text;">
          <a href="https://github.com/twjmy" target="_blank">ä½œè€…<i class="fa-brands fa-fw fa-github"></i>twjmy</a> åª’é«”è³‡æºçš†å–è‡ª
          <a href="https://hoyo.link/4zRkFHAL" target="_blank">Â©åŸç¥å®˜æ–¹å…ˆè¡Œå±•ç¤ºç¶²é </a>
        </div>
        <div class="src-components-hippo-modals-Reward-__index_---h_941631976---YeiL8w" style="background-image: none;">
          <div id="quitTimeLabel" class="src-components-hippo-modals-Reward-__index_---h_94163570---p3KweJ">ä¸‹æ¬¡ç™»å‡ºæ™‚é–“<br>(31å¤©å¾Œ)</div>
        </div>
        <div id="quitTimeBlock" class="src-components-hippo-modals-Reward-__index_---h_94163674---_GTw_j" style="user-select:text;">ğŸ–±ï¸è¤‡è£½å¾Œè¨ˆç®—<br><font color="red">â€»è§¸ç™¼æ™‚è¨ˆç®—çœ‹</font>ä¸Šé¢</div>
        <div id="backTimeLabel" class="src-components-hippo-modals-Reward-__index_---h_94163706---qa1M2w">ä¸‹æ¬¡å›æ­¸æ™‚é–“<br>(45å¤©å¾Œ)</div>
        <div id="backTimeBlock" class="src-components-hippo-modals-Reward-__index_---h_94163738---UoBAHO" style="user-select:text;">ğŸ–±ï¸è¤‡è£½å¾Œè¨ˆç®—<br><font color="red">â€»ç™»å‡ºæ™‚è¨ˆç®—çœ‹</font><font color="#627a90">ä¸‹é¢</font></div>
        <div id="clock" class="src-components-hippo-modals-Reward-__index_---h_94163770---apu1i8"><a href="https://www.hoyolab.com/article/32725526" target="_blank" title="ç”¨é€”?">ç•¶å‰æ™‚æˆ³(?)</a>(å¯è¼¸å…¥)</div>
        <input type="number" min="1600135200" placeholder="Enterè¨ˆç®—" title="è¼¸å…¥å¾ŒEnterè¨ˆç®—è¤‡è£½ä¿å­˜" style="
          background-color:unset;
          outline:none;
          border:none;
        " class="src-components-hippo-modals-Reward-__index_---h_94163802---DtaAdD"/>
        <div id="copyBtn" class="src-components-hippo-modals-Reward-__index_---h_94163834---lst4oB">ğŸ“‹è¤‡è£½</div>
        <a href="https://twjmy.github.io/genshin-reunion/" style="
          background-color: #4c86e8;
          color: #fafaea;
          font-size: x-large;
          text-decoration: none;
          width: fit-content;
          height: fit-content;
          border-radius: 0 20px;
          padding: .05em 1.5em;
        " class="src-components-hippo-modals-Reward-__index_---h_941631726---cMyhLW">
          å›æ­¸æ™‚é–“è¨ˆç®—</a>
        <a href="#" id="returneeGiftsBtn" class="src-components-hippo-modals-Reward-__index_---h_941631726---cMyhLW" style="
          width: fit-content;
          height: fit-content;
          text-decoration: none;
          font-size:medium;
          left:6.4rem;
          top:2.3rem;
          padding:.3em .75em;
          border-radius:5px;
          color:#fffcdd;
          background-color:#f78a2d;">
          åˆ‡æ›æ­¸é€”è´ˆç¦®</a>
        <div id="IntertwinedFate" class="src-components-hippo-modals-Reward-__index_---h_941631726---cMyhLW" style="
          background-image: url(https://wiki.hoyolab.com/_ipx/f_webp/https://bbs.hoyolab.com/hoyowiki/picture/object/Intertwined%2520Fate_icon.png);
          background-color:unset;
          box-shadow: 0 0 20px #fee27b inset;
          border-radius: 100%;
          height: 100px;
          width: 100px;
          left: 12.4rem;
          top: 3.5rem;
          display:none;
        "></div>
      </form>
    </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js"></script>
  <script>
    const clock = document.querySelector(`.src-components-hippo-modals-Reward-__index_---h_94163802---DtaAdD`),
      startTime = async function() {
        while( document.activeElement === clock
        || document.activeElement === copyBtn )
          await new Promise(requestAnimationFrame);
        clock.value = parseInt(Date.now() / 1e3);
        setTimeout(startTime, 1e3 - new Date() % 1e3);
      };

    let returnee = false;

    async function copyNow(save=true) {
      var copyText = clock.value;
      const ctime = copyText*1e3, d1 = 1e3*60*60*24, options = {
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric',
      };

      copyedBlock.innerHTML = `
        å·²è¤‡è£½ã€Œ<span style="user-select:all">${copyText}</span>ã€
        (${new Date(ctime).toLocaleTimeString(undefined, options)})`;// copy

      quitTimeBlock.innerHTML = `
        <span style="user-select:all">
          ${parseInt(new Date(d1*( returnee?(60-45):(45-14) )+ctime)/1e3)}
        </span>
        (${new Date(d1*( returnee?(60-45):(45-14) )+ctime).toLocaleTimeString(undefined, options)})
      `;// ä¸‹æ¬¡ç™»å‡ºæ™‚é–“

      backTimeBlock.innerHTML = `
        <span style="user-select:all">
          ${parseInt(new Date(d1*(returnee?60:45)+ctime)/1e3)}
        </span>
        (${new Date(d1*(returnee?60:45)+ctime).toLocaleTimeString(undefined, options)})
      `;// ä¸‹æ¬¡å›æ­¸æ™‚é–“

      quitInfoBlock.style.top=`5.5rem`;
      quitInfoBlock.innerHTML = `
        ç™»å‡º${returnee?`<font color="#f78a2d">45å¤©å¾Œ</font>`:`å…©å€‹ç¦®æ‹œä»¥å¾Œ`}
        <span style="user-select:all">
          ${parseInt(new Date(d1*(returnee?45:14)+ctime)/1e3)}</span>
        (${new Date(d1*(returnee?45:14)+ctime).toLocaleTimeString(undefined, options)})
        <br> ç™»å‡º${returnee?`<font color="#f78a2d">15å¤©å‰</font>`:`31å¤©å‰`}
        <span style="user-select:all">
          ${parseInt(new Date( ctime-d1* (returnee?15:31) )/1e3)}</span>
        (${new Date( ctime-d1* (returnee?15:31) ).toLocaleTimeString(undefined, options)})
      `;// ç™»å‡ºæ™‚è¨ˆç®—

      for(const e of document.querySelectorAll(`span`)){
        e.addEventListener(`click`,event=>navigator.clipboard.writeText(event.target.innerText),true);
      }

      if(save){
        navigator.clipboard.writeText(copyText);
        // https://github.com/tsayen/dom-to-image#usage
        domtoimage.toBlob(whole)
          .then(function (blob) {
              window.saveAs(blob, `${copyText}.png`);
          });
      }
    }

    copyBtn.onclick=copyNow;

    formModal.addEventListener(`submit`, async event => {
      if (event.defaulPrevented) return;
      event.preventDefault();
      copyNow(true);
    }, true);

    returneeGiftsBtn.addEventListener(`click`, async event => {
      if(returnee = !returnee){
        event.target.style.boxShadow = `inset 0px 0px 10px 3px #fee27b`;
        IntertwinedFate.style.display=`block`;
        quitInfoBlock.innerHTML=`<font color="#f78a2d">è§¸ç™¼æ¢ä»¶ï¼šå†’éšªç­‰éš30ç´šä»¥ä¸Šã€45å¤©ä»¥ä¸Šæœªç™»å…¥éŠæˆ²ä¸”60å¤©ä»¥ä¸Šæœªè§¸ç™¼ã€Œæ­¸é€”è´ˆç¦®ã€</font>`;
        quitTimeLabel.innerHTML=`ä¸‹æ¬¡ç™»å‡ºæ™‚é–“<br><font color="#f78a2d">(15å¤©å¾Œ)</font>`;
        backTimeLabel.innerHTML=`ä¸‹æ¬¡å›æ­¸æ™‚é–“<br><font color="#f78a2d">(60å¤©å¾Œ)</font>`;
      } else {
        event.target.style.boxShadow = `inherit`;
        document.querySelector(`#IntertwinedFate`).style.display=`none`;
        quitInfoBlock.innerHTML=`è§¸ç™¼æ¢ä»¶ï¼šå†’éšªç­‰éš10ç´šä»¥ä¸Šã€14å¤©ä»¥ä¸Šæœªç™»å…¥éŠæˆ²ä¸”45å¤©ä»¥ä¸Šæœªè§¸ç™¼ã€Œæ˜Ÿä¹‹æ­¸é‚„ã€`;
        quitTimeLabel.innerHTML=`ä¸‹æ¬¡ç™»å‡ºæ™‚é–“<br>(31å¤©å¾Œ)`;
        backTimeLabel.innerHTML=`ä¸‹æ¬¡å›æ­¸æ™‚é–“<br>(45å¤©å¾Œ)`;
      }
      quitInfoBlock.style.removeProperty(`top`);
      copyedBlock.innerHTML=`<a href="https://github.com/twjmy" target="_blank">
        ä½œè€…<i class="fa-brands fa-fw fa-github"></i>twjmy
        </a> åª’é«”è³‡æºçš†å–è‡ª<a href="https://hoyo.link/4zRkFHAL" target="_blank">Â©åŸç¥å®˜æ–¹å…ˆè¡Œå±•ç¤ºç¶²é 
      </a>`;
      quitTimeBlock.innerHTML=`ğŸ–±ï¸è¤‡è£½å¾Œè¨ˆç®—<br><font color="red">â€»è§¸ç™¼æ™‚è¨ˆç®—çœ‹</font>ä¸Šé¢`;
      backTimeBlock.innerHTML=`ğŸ–±ï¸è¤‡è£½å¾Œè¨ˆç®—<br><font color="red">â€»ç™»å‡ºæ™‚è¨ˆç®—çœ‹</font><font color="#627a90">ä¸‹é¢</font>`;
    }, true);

    screen.orientation.lock('landscape');
  </script>
</body>

</html>
